<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />

	<meta name="keywords" content="....">
	<meta name="description" content="....">
	<link rel="shortcut icon" type="image/png" href="images/favicon.png" />
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="css/custom.css" />
	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	  -->
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
		</script>

	<script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.36/dist/web3.min.js"
		integrity="sha256-nWBTbvxhJgjslRyuAKJHK+XcZPlCnmIAAMixz6EefVk=" crossorigin="anonymous"></script>

	<title>Eleven01 Certificate</title>

</head>

<body>
	<header class="static-header">
		<div>
			<div class="">
				<div class="col-md-6 col">
					<a href="index.html" class="logo mywallet">
						<img alt="Eleven01" src="images/eleven01.png" class="">
					</a>
				</div>

			</div>
		</div>
	</header>

	<section class="mywallet main-content">
		<div class="container">
			<div class="wrapper">
				<div class="row p-0">

					<div class="col-md-12 text-right">
						<h6><b>http://104.40.3.236:8083/api/node/rpc</b></h6>
					</div>

					<!-- Details of the certificate -->
					<div class="col-md-4">
						<h4 class="text-muted"><b>Details of the certificate</b></h4>


						<div class="mb-3">
							<label for="username"><b>Institute Name</b></label>
							<input type="text" class="form-control our-inputs" id="institutename" required=""
								autocomplete="off">
						</div>


						<div class="mb-3">
							<label for="coursename"><b>Issuer Name</b></label>
							<input type="text" class="form-control our-inputs" id="issuername" required="">
						</div>


						<div class="mb-3">
							<label for="grade"><b>Candidate Name</b></label>
							<input type="text" class="form-control our-inputs" id="candidatename" required="">
						</div>


						<div class="mb-3">
							<label for="issuername"><b>Course Name</b></label>
							<input type="text" class="form-control our-inputs" id="coursename" required="">
						</div>


						<div class="mb-3">
							<label for="location"><b>Location</b></label>
							<input type="text" class="form-control our-inputs" id="location" required="">
						</div>


						<div class="mb-3">
							<label for="date"><b>Date Of Completion</b></label>
							<input type="Date" class="form-control our-inputs" id="date">
						</div>


						<button id="button" class="btn our-buttons buttons-common-1" data-toggle="modal"
							id="registercertificate">Register</button>
					</div>
					<!-- End Details of the certificate -->


					<!-- Certificate -->
					<div class="col-md-8">
						<div class="col-md-12 p-0 certificate">
							<div class="certificate-4 text-center">

								<div class="certificate-body">

									<h3>Certificate of Completion</h3>

									<p class="my-4 small-texts" style="    margin-bottom: -12px !important;">This is to
										certify that</p>

									<h1 id="CandidateName" class="mt-3">Name will go here</h1>
									<p class="small-texts">Has Completed His/Her Course
									</p>
									<h5> <span id="CourseName"></span></h5>



									<p class="small-texts">
										<span class="trash-hash-title">Trans Hash:</span><br>
										<span id="Registerhash">Registerhash</span>
									</p>
								</div>


								<div class="row p-0 d-flex justify-content-between certificate-footer">
									<div class="col-md-3 align">
										<p class="subtitle">
											<h5> <span id="DateOfCompletion"></span></h5>
										</p>
										<h5><span id="Location"></span></h5>

									</div>

									<div class="col-md-3 border-top-0" style="margin-top:-20px">
										<img src="images/certificate-4-sheld.png" alt="">
									</div>

									<div class="col-md-3 pull-md-right">
										<p class="subtitle"></p>
										<h5><b> Issued by: <span id="IssuerName"></span></b></h5>
										<h5><b> Issued From :
												<span id="cInstituteName"></span>
											</b>
										</h5>
									</div>

								</div>

								<div class="issuedby">This digital credential was securely issued via Eleven01
									Blockchain Protocol and it can be validated at verify.eleven01.io</div>

							</div>
						</div>
					</div>
					<!-- End Certificate -->


				</div>
			</div>
		</div>
	</section>



	<footer align="center" class="mt-5">


	</footer>

	<style type="text/css">
		h1,
		h2,
		h3,
		h4,
		h5,
		h6 {
			color: #394240
		}

		.certificate-4 {
			font-family: 'Merriweather', serif;
			/* font-family: 'Merriweather', serif;
font-family: 'Roboto Slab', serif; */
			background: #fff;
			padding: 40px 20px;
			border: #394240 solid 6px;
			/* background: url(images/certificate/certificate-3-bg.png);
    */
			background-position: center center;
			background-size: auto;
			background-repeat: no-repeat;
			text-align: center;
		}

		.certificate-4 h1 {
			font-size: 45px;
			font-weight: 700
		}

		.certificate-4 h3 {
			font-size: 30px;
			font-weight: 700
		}

		.certificate-4 .small-texts {
			font-size: 13px;
			font-style: italic
		}

		.certificate-4 .certificate-footer p {
			margin-bottom: 5px;
			font-size: 12px;
			text-align: center;
			line-height: 14px
		}

		.certificate-4 .certificate-footer p.subtitle {
			font-weight: 700;
			font-size: 14px;
			color: #555
		}

		.certificate-4 .certificate-footer div {
			text-align: center;
			color: #8e8a8a;
			border-top: solid 2px #8e8a8a;
			margin-top: 20px;
			padding-top: 10px;
			line-height: 16px;
			margin-bottom: 20px;
		}

		.certificate-4 .certificate-body {
			margin-bottom: 15px;
			padding: 20px 0px
		}

		.certificate-4 .certificate-footer {
			margin: 15px;
			font-size: 13px
		}

		.certificate-4 h6 {
			font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue',
				sans-serif;
			color: #555;
			font-size: 11px;
		}

		.certificate-4 .trash-hash-title {
			font-size: 11px;
		}

		.certificate-4 .trash-hash-text {
			font-size: 10px;
			word-break: break-all;
			line-height: 18px !important;
			display: inline-block;
		}

		.certificate-4 .issuedby {
			font-size: 9px;
			word-break: break-all;
		}
	</style>

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script> -->

	<script>

		//Replace with your ABI

		var abi = [
			{
				"constant": true,
				"inputs": [
					{
						"name": "",
						"type": "uint256"
					}
				],
				"name": "certificateData",
				"outputs": [
					{
						"name": "Id",
						"type": "uint256"
					},
					{
						"name": "Issuer",
						"type": "address"
					},
					{
						"name": "InstituteName",
						"type": "string"
					},
					{
						"name": "IssuerName",
						"type": "string"
					},
					{
						"name": "CandidateName",
						"type": "string"
					},
					{
						"name": "CourseName",
						"type": "string"
					},
					{
						"name": "Location",
						"type": "string"
					},
					{
						"name": "DateOfCompletion",
						"type": "string"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			},
			{
				"constant": true,
				"inputs": [],
				"name": "certificateDataCount",
				"outputs": [
					{
						"name": "",
						"type": "uint256"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			},
			{
				"constant": true,
				"inputs": [],
				"name": "admin",
				"outputs": [
					{
						"name": "",
						"type": "address"
					}
				],
				"payable": false,
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "constructor"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": false,
						"name": "Id",
						"type": "uint256"
					},
					{
						"indexed": false,
						"name": "InstituteName",
						"type": "string"
					},
					{
						"indexed": false,
						"name": "IssuerName",
						"type": "string"
					},
					{
						"indexed": false,
						"name": "CandidateName",
						"type": "string"
					},
					{
						"indexed": false,
						"name": "CourseName",
						"type": "string"
					},
					{
						"indexed": false,
						"name": "Location",
						"type": "string"
					},
					{
						"indexed": false,
						"name": "DateOfCompletion",
						"type": "string"
					}
				],
				"name": "CertificateEvent",
				"type": "event"
			},
			{
				"constant": false,
				"inputs": [
					{
						"name": "InstituteName",
						"type": "string"
					},
					{
						"name": "IssuerName",
						"type": "string"
					},
					{
						"name": "CandidateName",
						"type": "string"
					},
					{
						"name": "CourseName",
						"type": "string"
					},
					{
						"name": "Location",
						"type": "string"
					},
					{
						"name": "DateOfCompletion",
						"type": "string"
					}
				],
				"name": "certificateIssue",
				"outputs": [],
				"payable": false,
				"stateMutability": "nonpayable",
				"type": "function"
			}
		];

		//Replace with your contract address

		var contractAddress = "0x1fafa2e3fedcd5f6c152e2f11e73304eba6f24cd";

		async function init() {
			window.addEventListener('load', async () => {
				if (window.ethereum) {
					window.web3 = new Web3(window.ethereum);
					await window.ethereum.enable();
					var web3 = new Web3(Web3.givenProvider)
					var accounts = await web3.eth.getAccounts();

					account = accounts[0];
					Certificate = await new web3.eth.Contract(abi, contractAddress);
					//console.log(Certificate)
					console.log(accounts)
				}
				else {
					console.log('Non-Ethereum browser detected. You should consider trying MetaMask!');
				}
			})

		}
		init();

		async function register() {

			var InstituteName = document.getElementById('institutename').value;
			if (InstituteName == "") {
				alert("Please enter  Institute Name.");
				return false;
			}

			var IssuerName = document.getElementById('issuername').value;
			if (IssuerName == "") {
				alert("Please enter  Issuer Name.");
				return false;
			}

			var CandidateName = document.getElementById('candidatename').value;
			if (CandidateName == "") {
				alert("Please enter  Candidate Name.");
				return false;
			}

			var CourseName = document.getElementById('coursename').value;
			if (CourseName == "") {
				alert("Please enter  Course Name.");
				return false;
			}

			var Location = document.getElementById('location').value;
			if (Location == "") {
				alert("Please enter  Location.");
				return false;
			}
			
			var DateOfCompletion = document.getElementById('date').value;
			if (DateOfCompletion == "") {
				alert("Please select  Date.");
				return false;
			}

			Certificate.methods.certificateIssue(InstituteName, IssuerName, CandidateName, CourseName, Location, DateOfCompletion).send({
				from:
					account
			}).on('receipt', function (receipt) {
				if (receipt) {
					$("#verified-details").modal("show");
				}
				document.getElementById('cId').value = receipt.events.CertificateEvent.returnValues.Id;
				document.getElementById('cInstituteName').textContent = receipt.events.CertificateEvent.returnValues.InstituteName;
				document.getElementById('IssuerName').textContent = receipt.events.CertificateEvent.returnValues.IssuerName;
				document.getElementById('CandidateName').textContent = receipt.events.CertificateEvent.returnValues.CandidateName;
				document.getElementById('CourseName').textContent = receipt.events.CertificateEvent.returnValues.CourseName;
				document.getElementById('Location').textContent = receipt.events.CertificateEvent.returnValues.Location;
				document.getElementById('DateOfCompletion').textContent = receipt.events.CertificateEvent.returnValues.DateOfCompletion;
				document.getElementById("Registerhash").innerHTML = receipt.transactionHash;
			});
		}
		document.getElementById('button').addEventListener('click', register);

	</script>

	<!-- popup -->
	<!-- Modal -->
	<div class="modal fade verification-info" id="verified-details" tabindex="-1" role="dialog"
		aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-dialog-centered" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Transaction Successful</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body text-center">
					<div class="pt-5 pb-2">
						<img src="images/success.png" alt="" style="width: 120px; margin: auto;" />
					</div>

					<h5 class="p-1 mb-0">Certificate ID: </h5>
					<input class="codebox" style="width: 220px;" id="cId" value="" readonly>

					<button class="btn btn-primary our-buttons buttons-common-1 copy-button" onclick="copytext()"><i
							class="fa fa-copy "></i> <span id="copied">Copy</span> </button>

					<br>

					<span class="copytext-subline">
						Please copy Certificate ID to verify
					</span>

				</div>
				<div class="modal-footer">

					<div class="col-md-6 text-left">
						<a class="btn btn-secondary our-buttons buttons-common-1 button-border verifyclose"
							href="verify.html" rel="nofollow noopener noreferrer" target="_blank">Verify</a>
					</div>

					<div class="col-md-6 text-right">
						<button type="button"
							class="btn btn-secondary our-buttons buttons-common-1 button-border verifyclose"
							data-dismiss="modal" data-dismiss="modal" aria-label="Close" id="refreshpage">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- popup end -->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

	<script>
		function copytext() {
			var copyText = document.getElementById("cId");
			//console.log(copyText);
			copyText.select();
			document.execCommand("copy");
			document.getElementById("copied").innerHTML = "Copied";
		}
	</script>

	<script>

		//  refresh 
		$(document).ready(function () {

			// auto refresh   input data
			$('.verifyclose, .close').click(function () {
				$("input").val("");
			})

			// // auto refresh   page
			// $('#refreshpage, .close').click(function () {
			// 	location.reload();
			// })
		});
	</script>

</body>

</html>